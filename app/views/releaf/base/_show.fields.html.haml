- fields.each do |field|
  - if field.is_a?(String) or field.is_a?(Symbol)
    - reflection = item.class.reflections[field.to_sym]

  - if (field.is_a?(String) or field.is_a?(Symbol)) && !reflection
    - if has_template? "_#{view_prefix}.#{field}"
      = render "#{view_prefix}.#{field}", :item => item, :name => field
    - else
      = render 'show.field', :item => item, :name => field, :view_prefix => view_prefix

  - elsif field.is_a? Hash
    - field.each_pair do |field, subfields|
      - reflection = item.class.reflections[field.to_sym]
      = render 'show.fields.association', :item => item, :field => field, :subfields => subfields, :reflection => reflection, :view_prefix => view_prefix
  - elsif reflection
    - subfields = reflection.klass.column_names - %w[id created_at updated_at password password_confirmation encrypted_password position]
    = render 'show.fields.association', :item => item, :field => field, :subfields => subfields, :reflection => reflection, :view_prefix => view_prefix
